[debug] Created tunnel using local port: '39021'

[debug] SERVER: "127.0.0.1:39021"

[debug] Original chart version: ""
[debug] CHART PATH: /home/matt/dev/learn/ch/clickhouse-on-kubernetes/helm/clickhouse-on-kube

Error: YAML parse error on clickhouse-on-kube/templates/configmap_configd.yaml: error converting YAML to JSON: yaml: line 15: found a tab character where an indentation space is expected

---
# Source: clickhouse-on-kube/templates/roles.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: Role
metadata:  
  name: patch-pod
  namespace: default
rules:
- apiGroups:
  - '*'
  resources:
  - pods
  verbs:
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: RoleBinding
metadata:  
  name: default:patch-pod
  namespace: default
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: patch-pod
subjects:
- kind: ServiceAccount
  name: default
  namespace: default
---
# Source: clickhouse-on-kube/templates/configmap_configd.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: pugnacious-armadillo-configd
  labels:
    app: pugnacious-armadillo-configd
    chart: clickhouse-on-kube-0.1.0
    release: pugnacious-armadillo
    heritage: Tiller
data:
  clickhouse_remote_servers.xml: |-
    <yandex>
        <remote_servers incl="clickhouse_remote_servers">        
        <default>
            
	                <shard>
                    <internal_replication>true</internal_replication>
                    
                        <replica>
                            <host>pugnacious-armadillo-0</host>
                            <port>9000</port>
                            
                        </replica>
                    
                        <replica>
                            <host>pugnacious-armadillo-1</host>
                            <port>9000</port>
                            
                        </replica>
                    
                        <replica>
                            <host>pugnacious-armadillo-2</host>
                            <port>9000</port>
                            
                        </replica>
                        
                    </shard>
            
	                <shard>
                    <internal_replication>true</internal_replication>
                    
                        <replica>
                            <host>pugnacious-armadillo-0</host>
                            <port>9000</port>
                            
                        </replica>
                    
                        <replica>
                            <host>pugnacious-armadillo-1</host>
                            <port>9000</port>
                            
                        </replica>
                    
                        <replica>
                            <host>pugnacious-armadillo-2</host>
                            <port>9000</port>
                            
                        </replica>
                        
                    </shard>
            
	                <shard>
                    <internal_replication>true</internal_replication>
                    
                        <replica>
                            <host>pugnacious-armadillo-0</host>
                            <port>9000</port>
                            
                        </replica>
                    
                        <replica>
                            <host>pugnacious-armadillo-1</host>
                            <port>9000</port>
                            
                        </replica>
                    
                        <replica>
                            <host>pugnacious-armadillo-2</host>
                            <port>9000</port>
                            
                        </replica>
                        
                    </shard>
            
	                <shard>
                    <internal_replication>true</internal_replication>
                    
                        <replica>
                            <host>pugnacious-armadillo-0</host>
                            <port>9000</port>
                            
                        </replica>
                    
                        <replica>
                            <host>pugnacious-armadillo-1</host>
                            <port>9000</port>
                            
                        </replica>
                    
                        <replica>
                            <host>pugnacious-armadillo-2</host>
                            <port>9000</port>
                            
                        </replica>
                        
                    </shard>
            
	                <shard>
                    <internal_replication>true</internal_replication>
                    
                        <replica>
                            <host>pugnacious-armadillo-0</host>
                            <port>9000</port>
                            
                        </replica>
                    
                        <replica>
                            <host>pugnacious-armadillo-1</host>
                            <port>9000</port>
                            
                        </replica>
                    
                        <replica>
                            <host>pugnacious-armadillo-2</host>
                            <port>9000</port>
                            
                        </replica>
                        
                    </shard>
            
        </default>
        </remote_servers>
    </yandex>
  docker_related_config.xml: |-
    <yandex>
        <listen_host>0.0.0.0</listen_host>
        <listen_host>::</listen_host>
        <listen_try>1</listen_try>
        <logger>
            <console>1</console>
        </logger>
    </yandex>


---
# Source: clickhouse-on-kube/templates/statefulset.yaml

---
apiVersion: apps/v1beta1
kind: StatefulSet
metadata:
  name: pugnacious-armadillo-0
  labels:
    app: pugnacious-armadillo
    chart: clickhouse-on-kube-0.1.0
    release: pugnacious-armadillo
    heritage: Tiller
spec:
  podManagementPolicy: OrderedReady
  affinity:
    nodeAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
            - key: app
              operator: In
              values:
                - web-store
        topologyKey: "kubernetes.io/hostname"
  replicas: 3
  selector:
    matchLabels:
      app: pugnacious-armadillo
      release: pugnacious-armadillo
  serviceName: pugnacious-armadillo
  template:
    metadata:
      labels:
        app: pugnacious-armadillo
        release: pugnacious-armadillo
    spec:      
      initContainers:
      - name: labeler
        image: devth/k8s-labeler
        env:
        - name: KUBE_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: KUBE_LABEL_shard_name
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
      containers:
        - name: pugnacious-armadillo
          image: "dmitryb/clickhouse-server:latest"
          imagePullPolicy: Always          
          ports:
          - name: rpc
            containerPort: 9000
            protocol: TCP
          - name: rest
            containerPort: 8123
            protocol: TCP          
          - name: interserver
            containerPort: 9009
            protocol: TCP
          livenessProbe:
            httpGet:
              path: /
              port: rest
            initialDelaySeconds: 10
            periodSeconds: 10
            failureThreshold: 5
            timeoutSeconds: 1
          readinessProbe:
            httpGet:
              path: /
              port: rest
            initialDelaySeconds: 10
            periodSeconds: 10
            failureThreshold: 5
            timeoutSeconds: 1
          volumeMounts:
          - name: clickhouse-configd
            mountPath: /etc/clickhouse-server/config.d
          
          
          resources:
            limits:
              cpu: 250m
              memory: 1024Mi
            requests:
              cpu: 250m
              memory: 1024Mi
            
      volumes:
      - name: clickhouse-configd
        configMap:
          name: pugnacious-armadillo-configd
      
      
      nodeSelector:
        Capabilities:
          APIVersions:
            admissionregistration.k8s.io/v1beta1: {}
            apiextensions.k8s.io/v1beta1: {}
            apiregistration.k8s.io/v1: {}
            apiregistration.k8s.io/v1beta1: {}
            apps/v1: {}
            apps/v1beta1: {}
            apps/v1beta2: {}
            authentication.k8s.io/v1: {}
            authentication.k8s.io/v1beta1: {}
            authorization.k8s.io/v1: {}
            authorization.k8s.io/v1beta1: {}
            autoscaling/v1: {}
            autoscaling/v2beta1: {}
            batch/v1: {}
            batch/v1beta1: {}
            certificates.k8s.io/v1beta1: {}
            events.k8s.io/v1beta1: {}
            extensions/v1beta1: {}
            networking.k8s.io/v1: {}
            policy/v1beta1: {}
            rbac.authorization.k8s.io/v1: {}
            rbac.authorization.k8s.io/v1beta1: {}
            storage.k8s.io/v1: {}
            storage.k8s.io/v1beta1: {}
            v1: {}
          KubeVersion:
            buildDate: 2018-03-26T16:44:10Z
            compiler: gc
            gitCommit: fc32d2f3698e36b93322a3465f63a14e9f0eaead
            gitTreeState: clean
            gitVersion: v1.10.0
            goVersion: go1.9.3
            major: "1"
            minor: "10"
            platform: linux/amd64
          TillerVersion:
            git_commit: 2e55dbe1fdb5fdb96b75ff144a339489417b146b
            git_tree_state: clean
            sem_ver: v2.11.0
        Chart:
          apiVersion: v1
          appVersion: "1.0"
          description: A Helm chart for Kubernetes
          name: clickhouse-on-kube
          version: 0.1.0
        Files:
          .helmignore: IyBQYXR0ZXJucyB0byBpZ25vcmUgd2hlbiBidWlsZGluZyBwYWNrYWdlcy4KIyBUaGlzIHN1cHBvcnRzIHNoZWxsIGdsb2IgbWF0Y2hpbmcsIHJlbGF0aXZlIHBhdGggbWF0Y2hpbmcsIGFuZAojIG5lZ2F0aW9uIChwcmVmaXhlZCB3aXRoICEpLiBPbmx5IG9uZSBwYXR0ZXJuIHBlciBsaW5lLgouRFNfU3RvcmUKIyBDb21tb24gVkNTIGRpcnMKLmdpdC8KLmdpdGlnbm9yZQouYnpyLwouYnpyaWdub3JlCi5oZy8KLmhnaWdub3JlCi5zdm4vCiMgQ29tbW9uIGJhY2t1cCBmaWxlcwoqLnN3cAoqLmJhawoqLnRtcAoqfgojIFZhcmlvdXMgSURFcwoucHJvamVjdAouaWRlYS8KKi50bXByb2oK
          Makefile: CmhlbG0tZHJ5OgoJaGVsbSBpbnN0YWxsIC0tbmFtZSBjbGlja2hvdXNlLXRlc3QgLS1uYW1lc3BhY2U9cGxheWdyb3VuZCAtLWRlYnVnIC0tZHJ5LXJ1biAuCgpoZWxtLWxpbnQ6CgloZWxtIGxpbnQgLgoKaGVsbS1pbnN0YWxsLXRlc3Q6CgloZWxtIGluc3RhbGwgLS1uYW1lIGNsaWNraG91c2UtdGVzdCAtLW5hbWVzcGFjZT1wbGF5Z3JvdW5kIC4KCmhlbG0taW5zdGFsbC1zdGc6CgloZWxtIGluc3RhbGwgLS1uYW1lIGNsaWNraG91c2Utc3RnIFwKCSAgICAtLW5hbWVzcGFjZT1jbGlja2hvdXNlIFwKCSAgICAtLXNldCByZXBsaWNhQ291bnQ9NSBcCgkgICAgLS1zZXQgZWJzLnNpemU9NTAwR2kgXAoJICAgIC0tc2V0IHNlY3VyaXR5LmVuYWJsZWQ9dHJ1ZSBcCgkgICAgLS1zZXQgcmVzb3VyY2VzLmxpbWl0cy5jcHU9MzgwMG0gXAoJICAgIC0tc2V0IHJlc291cmNlcy5saW1pdHMubWVtb3J5PTI4MDAwTWkgXAoJICAgIC0tc2V0IHJlc291cmNlcy5yZXF1ZXN0cy5jcHU9MzgwMG0gXAoJICAgIC0tc2V0IHJlc291cmNlcy5yZXF1ZXN0cy5tZW1vcnk9MjgwMDBNaSBcCgkgICAgLgoKaGVsbS1kZWw6CgloZWxtIGRlbCAtLXB1cmdlIGNsaWNraG91c2UtdGVzdAoKa3ViZS1nZXQ6CglrdWJlY3RsIC1uIHBsYXlncm91bmQgZ2V0IGRlcGxveW1lbnQscG9kLHN2YyxpbmdyZXNzCg==
          out.txt: W2RlYnVnXSBDcmVhdGVkIHR1bm5lbCB1c2luZyBsb2NhbCBwb3J0OiAnMzkwMjEnCgpbZGVidWddIFNFUlZFUjogIjEyNy4wLjAuMTozOTAyMSIKCltkZWJ1Z10gT3JpZ2luYWwgY2hhcnQgdmVyc2lvbjogIiIKW2RlYnVnXSBDSEFSVCBQQVRIOiAvaG9tZS9tYXR0L2Rldi9sZWFybi9jaC9jbGlja2hvdXNlLW9uLWt1YmVybmV0ZXMvaGVsbS9jbGlja2hvdXNlLW9uLWt1YmUKCg==
        Release:
          IsInstall: true
          IsUpgrade: false
          Name: pugnacious-armadillo
          Namespace: default
          Revision: 1
          Service: Tiller
          Time:
            nanos: 183928543
            seconds: 1541388067
        Template:
          BasePath: clickhouse-on-kube/templates
          Name: clickhouse-on-kube/templates/statefulset.yaml
        Values:
          affinity: {}
          ebs:
            enabled: false
            size: 8Gi
          elb:
            enabled: false
            internal_range: 10.59.0.0/16,10.10.0.0/16
          image:
            pullPolicy: Always
            repository: dmitryb/clickhouse-server
            tag: latest
          ingress:
            annotations: {}
            enabled: false
            hosts:
            - chart-example.local
            path: /
            tls: []
          nodeSelector:
            type: services
          rbac: true
          replicaCount: "3"
          resources:
            limits:
              cpu: 250m
              memory: 1024Mi
            requests:
              cpu: 250m
              memory: 1024Mi
          security:
            distributed:
              password: iudhc87wfy87hrevh
              profile: default
              quota: default
              user: sys_distrib_query
            enabled: false
            profiles:
            - load_balancing: random
              max_memory_usage: 10000000000
              name: default
              use_uncompressed_cache: 0
            quotas:
            - duration: 3600
              errors: 0
              execution_time: 0
              name: default
              queries: 0
              read_rows: 0
              result_rows: 0
            users:
            - name: user_1
              password: djfgyeugf3484rf4
              profile: default
              quota: default
            - name: svc
              password: sdkfh1kjdshfkjj3
              profile: default
              quota: default
          service:
            rest_port: 8123
            rpc_port: 9000
            type: ClusterIP
          shardCount: "5"
          tolerations: []
          zk:
            enabled: false
            port: 2181
            servers:
            - zk-zookeeper.zk
          



---
apiVersion: apps/v1beta1
kind: StatefulSet
metadata:
  name: pugnacious-armadillo-1
  labels:
    app: pugnacious-armadillo
    chart: clickhouse-on-kube-0.1.0
    release: pugnacious-armadillo
    heritage: Tiller
spec:
  podManagementPolicy: OrderedReady
  affinity:
    nodeAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
            - key: app
              operator: In
              values:
                - web-store
        topologyKey: "kubernetes.io/hostname"
  replicas: 3
  selector:
    matchLabels:
      app: pugnacious-armadillo
      release: pugnacious-armadillo
  serviceName: pugnacious-armadillo
  template:
    metadata:
      labels:
        app: pugnacious-armadillo
        release: pugnacious-armadillo
    spec:      
      initContainers:
      - name: labeler
        image: devth/k8s-labeler
        env:
        - name: KUBE_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: KUBE_LABEL_shard_name
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
      containers:
        - name: pugnacious-armadillo
          image: "dmitryb/clickhouse-server:latest"
          imagePullPolicy: Always          
          ports:
          - name: rpc
            containerPort: 9000
            protocol: TCP
          - name: rest
            containerPort: 8123
            protocol: TCP          
          - name: interserver
            containerPort: 9009
            protocol: TCP
          livenessProbe:
            httpGet:
              path: /
              port: rest
            initialDelaySeconds: 10
            periodSeconds: 10
            failureThreshold: 5
            timeoutSeconds: 1
          readinessProbe:
            httpGet:
              path: /
              port: rest
            initialDelaySeconds: 10
            periodSeconds: 10
            failureThreshold: 5
            timeoutSeconds: 1
          volumeMounts:
          - name: clickhouse-configd
            mountPath: /etc/clickhouse-server/config.d
          
          
          resources:
            limits:
              cpu: 250m
              memory: 1024Mi
            requests:
              cpu: 250m
              memory: 1024Mi
            
      volumes:
      - name: clickhouse-configd
        configMap:
          name: pugnacious-armadillo-configd
      
      
      nodeSelector:
        Capabilities:
          APIVersions:
            admissionregistration.k8s.io/v1beta1: {}
            apiextensions.k8s.io/v1beta1: {}
            apiregistration.k8s.io/v1: {}
            apiregistration.k8s.io/v1beta1: {}
            apps/v1: {}
            apps/v1beta1: {}
            apps/v1beta2: {}
            authentication.k8s.io/v1: {}
            authentication.k8s.io/v1beta1: {}
            authorization.k8s.io/v1: {}
            authorization.k8s.io/v1beta1: {}
            autoscaling/v1: {}
            autoscaling/v2beta1: {}
            batch/v1: {}
            batch/v1beta1: {}
            certificates.k8s.io/v1beta1: {}
            events.k8s.io/v1beta1: {}
            extensions/v1beta1: {}
            networking.k8s.io/v1: {}
            policy/v1beta1: {}
            rbac.authorization.k8s.io/v1: {}
            rbac.authorization.k8s.io/v1beta1: {}
            storage.k8s.io/v1: {}
            storage.k8s.io/v1beta1: {}
            v1: {}
          KubeVersion:
            buildDate: 2018-03-26T16:44:10Z
            compiler: gc
            gitCommit: fc32d2f3698e36b93322a3465f63a14e9f0eaead
            gitTreeState: clean
            gitVersion: v1.10.0
            goVersion: go1.9.3
            major: "1"
            minor: "10"
            platform: linux/amd64
          TillerVersion:
            git_commit: 2e55dbe1fdb5fdb96b75ff144a339489417b146b
            git_tree_state: clean
            sem_ver: v2.11.0
        Chart:
          apiVersion: v1
          appVersion: "1.0"
          description: A Helm chart for Kubernetes
          name: clickhouse-on-kube
          version: 0.1.0
        Files:
          .helmignore: IyBQYXR0ZXJucyB0byBpZ25vcmUgd2hlbiBidWlsZGluZyBwYWNrYWdlcy4KIyBUaGlzIHN1cHBvcnRzIHNoZWxsIGdsb2IgbWF0Y2hpbmcsIHJlbGF0aXZlIHBhdGggbWF0Y2hpbmcsIGFuZAojIG5lZ2F0aW9uIChwcmVmaXhlZCB3aXRoICEpLiBPbmx5IG9uZSBwYXR0ZXJuIHBlciBsaW5lLgouRFNfU3RvcmUKIyBDb21tb24gVkNTIGRpcnMKLmdpdC8KLmdpdGlnbm9yZQouYnpyLwouYnpyaWdub3JlCi5oZy8KLmhnaWdub3JlCi5zdm4vCiMgQ29tbW9uIGJhY2t1cCBmaWxlcwoqLnN3cAoqLmJhawoqLnRtcAoqfgojIFZhcmlvdXMgSURFcwoucHJvamVjdAouaWRlYS8KKi50bXByb2oK
          Makefile: CmhlbG0tZHJ5OgoJaGVsbSBpbnN0YWxsIC0tbmFtZSBjbGlja2hvdXNlLXRlc3QgLS1uYW1lc3BhY2U9cGxheWdyb3VuZCAtLWRlYnVnIC0tZHJ5LXJ1biAuCgpoZWxtLWxpbnQ6CgloZWxtIGxpbnQgLgoKaGVsbS1pbnN0YWxsLXRlc3Q6CgloZWxtIGluc3RhbGwgLS1uYW1lIGNsaWNraG91c2UtdGVzdCAtLW5hbWVzcGFjZT1wbGF5Z3JvdW5kIC4KCmhlbG0taW5zdGFsbC1zdGc6CgloZWxtIGluc3RhbGwgLS1uYW1lIGNsaWNraG91c2Utc3RnIFwKCSAgICAtLW5hbWVzcGFjZT1jbGlja2hvdXNlIFwKCSAgICAtLXNldCByZXBsaWNhQ291bnQ9NSBcCgkgICAgLS1zZXQgZWJzLnNpemU9NTAwR2kgXAoJICAgIC0tc2V0IHNlY3VyaXR5LmVuYWJsZWQ9dHJ1ZSBcCgkgICAgLS1zZXQgcmVzb3VyY2VzLmxpbWl0cy5jcHU9MzgwMG0gXAoJICAgIC0tc2V0IHJlc291cmNlcy5saW1pdHMubWVtb3J5PTI4MDAwTWkgXAoJICAgIC0tc2V0IHJlc291cmNlcy5yZXF1ZXN0cy5jcHU9MzgwMG0gXAoJICAgIC0tc2V0IHJlc291cmNlcy5yZXF1ZXN0cy5tZW1vcnk9MjgwMDBNaSBcCgkgICAgLgoKaGVsbS1kZWw6CgloZWxtIGRlbCAtLXB1cmdlIGNsaWNraG91c2UtdGVzdAoKa3ViZS1nZXQ6CglrdWJlY3RsIC1uIHBsYXlncm91bmQgZ2V0IGRlcGxveW1lbnQscG9kLHN2YyxpbmdyZXNzCg==
          out.txt: W2RlYnVnXSBDcmVhdGVkIHR1bm5lbCB1c2luZyBsb2NhbCBwb3J0OiAnMzkwMjEnCgpbZGVidWddIFNFUlZFUjogIjEyNy4wLjAuMTozOTAyMSIKCltkZWJ1Z10gT3JpZ2luYWwgY2hhcnQgdmVyc2lvbjogIiIKW2RlYnVnXSBDSEFSVCBQQVRIOiAvaG9tZS9tYXR0L2Rldi9sZWFybi9jaC9jbGlja2hvdXNlLW9uLWt1YmVybmV0ZXMvaGVsbS9jbGlja2hvdXNlLW9uLWt1YmUKCg==
        Release:
          IsInstall: true
          IsUpgrade: false
          Name: pugnacious-armadillo
          Namespace: default
          Revision: 1
          Service: Tiller
          Time:
            nanos: 183928543
            seconds: 1541388067
        Template:
          BasePath: clickhouse-on-kube/templates
          Name: clickhouse-on-kube/templates/statefulset.yaml
        Values:
          affinity: {}
          ebs:
            enabled: false
            size: 8Gi
          elb:
            enabled: false
            internal_range: 10.59.0.0/16,10.10.0.0/16
          image:
            pullPolicy: Always
            repository: dmitryb/clickhouse-server
            tag: latest
          ingress:
            annotations: {}
            enabled: false
            hosts:
            - chart-example.local
            path: /
            tls: []
          nodeSelector:
            type: services
          rbac: true
          replicaCount: "3"
          resources:
            limits:
              cpu: 250m
              memory: 1024Mi
            requests:
              cpu: 250m
              memory: 1024Mi
          security:
            distributed:
              password: iudhc87wfy87hrevh
              profile: default
              quota: default
              user: sys_distrib_query
            enabled: false
            profiles:
            - load_balancing: random
              max_memory_usage: 10000000000
              name: default
              use_uncompressed_cache: 0
            quotas:
            - duration: 3600
              errors: 0
              execution_time: 0
              name: default
              queries: 0
              read_rows: 0
              result_rows: 0
            users:
            - name: user_1
              password: djfgyeugf3484rf4
              profile: default
              quota: default
            - name: svc
              password: sdkfh1kjdshfkjj3
              profile: default
              quota: default
          service:
            rest_port: 8123
            rpc_port: 9000
            type: ClusterIP
          shardCount: "5"
          tolerations: []
          zk:
            enabled: false
            port: 2181
            servers:
            - zk-zookeeper.zk
          



---
apiVersion: apps/v1beta1
kind: StatefulSet
metadata:
  name: pugnacious-armadillo-2
  labels:
    app: pugnacious-armadillo
    chart: clickhouse-on-kube-0.1.0
    release: pugnacious-armadillo
    heritage: Tiller
spec:
  podManagementPolicy: OrderedReady
  affinity:
    nodeAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
            - key: app
              operator: In
              values:
                - web-store
        topologyKey: "kubernetes.io/hostname"
  replicas: 3
  selector:
    matchLabels:
      app: pugnacious-armadillo
      release: pugnacious-armadillo
  serviceName: pugnacious-armadillo
  template:
    metadata:
      labels:
        app: pugnacious-armadillo
        release: pugnacious-armadillo
    spec:      
      initContainers:
      - name: labeler
        image: devth/k8s-labeler
        env:
        - name: KUBE_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: KUBE_LABEL_shard_name
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
      containers:
        - name: pugnacious-armadillo
          image: "dmitryb/clickhouse-server:latest"
          imagePullPolicy: Always          
          ports:
          - name: rpc
            containerPort: 9000
            protocol: TCP
          - name: rest
            containerPort: 8123
            protocol: TCP          
          - name: interserver
            containerPort: 9009
            protocol: TCP
          livenessProbe:
            httpGet:
              path: /
              port: rest
            initialDelaySeconds: 10
            periodSeconds: 10
            failureThreshold: 5
            timeoutSeconds: 1
          readinessProbe:
            httpGet:
              path: /
              port: rest
            initialDelaySeconds: 10
            periodSeconds: 10
            failureThreshold: 5
            timeoutSeconds: 1
          volumeMounts:
          - name: clickhouse-configd
            mountPath: /etc/clickhouse-server/config.d
          
          
          resources:
            limits:
              cpu: 250m
              memory: 1024Mi
            requests:
              cpu: 250m
              memory: 1024Mi
            
      volumes:
      - name: clickhouse-configd
        configMap:
          name: pugnacious-armadillo-configd
      
      
      nodeSelector:
        Capabilities:
          APIVersions:
            admissionregistration.k8s.io/v1beta1: {}
            apiextensions.k8s.io/v1beta1: {}
            apiregistration.k8s.io/v1: {}
            apiregistration.k8s.io/v1beta1: {}
            apps/v1: {}
            apps/v1beta1: {}
            apps/v1beta2: {}
            authentication.k8s.io/v1: {}
            authentication.k8s.io/v1beta1: {}
            authorization.k8s.io/v1: {}
            authorization.k8s.io/v1beta1: {}
            autoscaling/v1: {}
            autoscaling/v2beta1: {}
            batch/v1: {}
            batch/v1beta1: {}
            certificates.k8s.io/v1beta1: {}
            events.k8s.io/v1beta1: {}
            extensions/v1beta1: {}
            networking.k8s.io/v1: {}
            policy/v1beta1: {}
            rbac.authorization.k8s.io/v1: {}
            rbac.authorization.k8s.io/v1beta1: {}
            storage.k8s.io/v1: {}
            storage.k8s.io/v1beta1: {}
            v1: {}
          KubeVersion:
            buildDate: 2018-03-26T16:44:10Z
            compiler: gc
            gitCommit: fc32d2f3698e36b93322a3465f63a14e9f0eaead
            gitTreeState: clean
            gitVersion: v1.10.0
            goVersion: go1.9.3
            major: "1"
            minor: "10"
            platform: linux/amd64
          TillerVersion:
            git_commit: 2e55dbe1fdb5fdb96b75ff144a339489417b146b
            git_tree_state: clean
            sem_ver: v2.11.0
        Chart:
          apiVersion: v1
          appVersion: "1.0"
          description: A Helm chart for Kubernetes
          name: clickhouse-on-kube
          version: 0.1.0
        Files:
          .helmignore: IyBQYXR0ZXJucyB0byBpZ25vcmUgd2hlbiBidWlsZGluZyBwYWNrYWdlcy4KIyBUaGlzIHN1cHBvcnRzIHNoZWxsIGdsb2IgbWF0Y2hpbmcsIHJlbGF0aXZlIHBhdGggbWF0Y2hpbmcsIGFuZAojIG5lZ2F0aW9uIChwcmVmaXhlZCB3aXRoICEpLiBPbmx5IG9uZSBwYXR0ZXJuIHBlciBsaW5lLgouRFNfU3RvcmUKIyBDb21tb24gVkNTIGRpcnMKLmdpdC8KLmdpdGlnbm9yZQouYnpyLwouYnpyaWdub3JlCi5oZy8KLmhnaWdub3JlCi5zdm4vCiMgQ29tbW9uIGJhY2t1cCBmaWxlcwoqLnN3cAoqLmJhawoqLnRtcAoqfgojIFZhcmlvdXMgSURFcwoucHJvamVjdAouaWRlYS8KKi50bXByb2oK
          Makefile: CmhlbG0tZHJ5OgoJaGVsbSBpbnN0YWxsIC0tbmFtZSBjbGlja2hvdXNlLXRlc3QgLS1uYW1lc3BhY2U9cGxheWdyb3VuZCAtLWRlYnVnIC0tZHJ5LXJ1biAuCgpoZWxtLWxpbnQ6CgloZWxtIGxpbnQgLgoKaGVsbS1pbnN0YWxsLXRlc3Q6CgloZWxtIGluc3RhbGwgLS1uYW1lIGNsaWNraG91c2UtdGVzdCAtLW5hbWVzcGFjZT1wbGF5Z3JvdW5kIC4KCmhlbG0taW5zdGFsbC1zdGc6CgloZWxtIGluc3RhbGwgLS1uYW1lIGNsaWNraG91c2Utc3RnIFwKCSAgICAtLW5hbWVzcGFjZT1jbGlja2hvdXNlIFwKCSAgICAtLXNldCByZXBsaWNhQ291bnQ9NSBcCgkgICAgLS1zZXQgZWJzLnNpemU9NTAwR2kgXAoJICAgIC0tc2V0IHNlY3VyaXR5LmVuYWJsZWQ9dHJ1ZSBcCgkgICAgLS1zZXQgcmVzb3VyY2VzLmxpbWl0cy5jcHU9MzgwMG0gXAoJICAgIC0tc2V0IHJlc291cmNlcy5saW1pdHMubWVtb3J5PTI4MDAwTWkgXAoJICAgIC0tc2V0IHJlc291cmNlcy5yZXF1ZXN0cy5jcHU9MzgwMG0gXAoJICAgIC0tc2V0IHJlc291cmNlcy5yZXF1ZXN0cy5tZW1vcnk9MjgwMDBNaSBcCgkgICAgLgoKaGVsbS1kZWw6CgloZWxtIGRlbCAtLXB1cmdlIGNsaWNraG91c2UtdGVzdAoKa3ViZS1nZXQ6CglrdWJlY3RsIC1uIHBsYXlncm91bmQgZ2V0IGRlcGxveW1lbnQscG9kLHN2YyxpbmdyZXNzCg==
          out.txt: W2RlYnVnXSBDcmVhdGVkIHR1bm5lbCB1c2luZyBsb2NhbCBwb3J0OiAnMzkwMjEnCgpbZGVidWddIFNFUlZFUjogIjEyNy4wLjAuMTozOTAyMSIKCltkZWJ1Z10gT3JpZ2luYWwgY2hhcnQgdmVyc2lvbjogIiIKW2RlYnVnXSBDSEFSVCBQQVRIOiAvaG9tZS9tYXR0L2Rldi9sZWFybi9jaC9jbGlja2hvdXNlLW9uLWt1YmVybmV0ZXMvaGVsbS9jbGlja2hvdXNlLW9uLWt1YmUKCg==
        Release:
          IsInstall: true
          IsUpgrade: false
          Name: pugnacious-armadillo
          Namespace: default
          Revision: 1
          Service: Tiller
          Time:
            nanos: 183928543
            seconds: 1541388067
        Template:
          BasePath: clickhouse-on-kube/templates
          Name: clickhouse-on-kube/templates/statefulset.yaml
        Values:
          affinity: {}
          ebs:
            enabled: false
            size: 8Gi
          elb:
            enabled: false
            internal_range: 10.59.0.0/16,10.10.0.0/16
          image:
            pullPolicy: Always
            repository: dmitryb/clickhouse-server
            tag: latest
          ingress:
            annotations: {}
            enabled: false
            hosts:
            - chart-example.local
            path: /
            tls: []
          nodeSelector:
            type: services
          rbac: true
          replicaCount: "3"
          resources:
            limits:
              cpu: 250m
              memory: 1024Mi
            requests:
              cpu: 250m
              memory: 1024Mi
          security:
            distributed:
              password: iudhc87wfy87hrevh
              profile: default
              quota: default
              user: sys_distrib_query
            enabled: false
            profiles:
            - load_balancing: random
              max_memory_usage: 10000000000
              name: default
              use_uncompressed_cache: 0
            quotas:
            - duration: 3600
              errors: 0
              execution_time: 0
              name: default
              queries: 0
              read_rows: 0
              result_rows: 0
            users:
            - name: user_1
              password: djfgyeugf3484rf4
              profile: default
              quota: default
            - name: svc
              password: sdkfh1kjdshfkjj3
              profile: default
              quota: default
          service:
            rest_port: 8123
            rpc_port: 9000
            type: ClusterIP
          shardCount: "5"
          tolerations: []
          zk:
            enabled: false
            port: 2181
            servers:
            - zk-zookeeper.zk
          



---
apiVersion: apps/v1beta1
kind: StatefulSet
metadata:
  name: pugnacious-armadillo-3
  labels:
    app: pugnacious-armadillo
    chart: clickhouse-on-kube-0.1.0
    release: pugnacious-armadillo
    heritage: Tiller
spec:
  podManagementPolicy: OrderedReady
  affinity:
    nodeAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
            - key: app
              operator: In
              values:
                - web-store
        topologyKey: "kubernetes.io/hostname"
  replicas: 3
  selector:
    matchLabels:
      app: pugnacious-armadillo
      release: pugnacious-armadillo
  serviceName: pugnacious-armadillo
  template:
    metadata:
      labels:
        app: pugnacious-armadillo
        release: pugnacious-armadillo
    spec:      
      initContainers:
      - name: labeler
        image: devth/k8s-labeler
        env:
        - name: KUBE_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: KUBE_LABEL_shard_name
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
      containers:
        - name: pugnacious-armadillo
          image: "dmitryb/clickhouse-server:latest"
          imagePullPolicy: Always          
          ports:
          - name: rpc
            containerPort: 9000
            protocol: TCP
          - name: rest
            containerPort: 8123
            protocol: TCP          
          - name: interserver
            containerPort: 9009
            protocol: TCP
          livenessProbe:
            httpGet:
              path: /
              port: rest
            initialDelaySeconds: 10
            periodSeconds: 10
            failureThreshold: 5
            timeoutSeconds: 1
          readinessProbe:
            httpGet:
              path: /
              port: rest
            initialDelaySeconds: 10
            periodSeconds: 10
            failureThreshold: 5
            timeoutSeconds: 1
          volumeMounts:
          - name: clickhouse-configd
            mountPath: /etc/clickhouse-server/config.d
          
          
          resources:
            limits:
              cpu: 250m
              memory: 1024Mi
            requests:
              cpu: 250m
              memory: 1024Mi
            
      volumes:
      - name: clickhouse-configd
        configMap:
          name: pugnacious-armadillo-configd
      
      
      nodeSelector:
        Capabilities:
          APIVersions:
            admissionregistration.k8s.io/v1beta1: {}
            apiextensions.k8s.io/v1beta1: {}
            apiregistration.k8s.io/v1: {}
            apiregistration.k8s.io/v1beta1: {}
            apps/v1: {}
            apps/v1beta1: {}
            apps/v1beta2: {}
            authentication.k8s.io/v1: {}
            authentication.k8s.io/v1beta1: {}
            authorization.k8s.io/v1: {}
            authorization.k8s.io/v1beta1: {}
            autoscaling/v1: {}
            autoscaling/v2beta1: {}
            batch/v1: {}
            batch/v1beta1: {}
            certificates.k8s.io/v1beta1: {}
            events.k8s.io/v1beta1: {}
            extensions/v1beta1: {}
            networking.k8s.io/v1: {}
            policy/v1beta1: {}
            rbac.authorization.k8s.io/v1: {}
            rbac.authorization.k8s.io/v1beta1: {}
            storage.k8s.io/v1: {}
            storage.k8s.io/v1beta1: {}
            v1: {}
          KubeVersion:
            buildDate: 2018-03-26T16:44:10Z
            compiler: gc
            gitCommit: fc32d2f3698e36b93322a3465f63a14e9f0eaead
            gitTreeState: clean
            gitVersion: v1.10.0
            goVersion: go1.9.3
            major: "1"
            minor: "10"
            platform: linux/amd64
          TillerVersion:
            git_commit: 2e55dbe1fdb5fdb96b75ff144a339489417b146b
            git_tree_state: clean
            sem_ver: v2.11.0
        Chart:
          apiVersion: v1
          appVersion: "1.0"
          description: A Helm chart for Kubernetes
          name: clickhouse-on-kube
          version: 0.1.0
        Files:
          .helmignore: IyBQYXR0ZXJucyB0byBpZ25vcmUgd2hlbiBidWlsZGluZyBwYWNrYWdlcy4KIyBUaGlzIHN1cHBvcnRzIHNoZWxsIGdsb2IgbWF0Y2hpbmcsIHJlbGF0aXZlIHBhdGggbWF0Y2hpbmcsIGFuZAojIG5lZ2F0aW9uIChwcmVmaXhlZCB3aXRoICEpLiBPbmx5IG9uZSBwYXR0ZXJuIHBlciBsaW5lLgouRFNfU3RvcmUKIyBDb21tb24gVkNTIGRpcnMKLmdpdC8KLmdpdGlnbm9yZQouYnpyLwouYnpyaWdub3JlCi5oZy8KLmhnaWdub3JlCi5zdm4vCiMgQ29tbW9uIGJhY2t1cCBmaWxlcwoqLnN3cAoqLmJhawoqLnRtcAoqfgojIFZhcmlvdXMgSURFcwoucHJvamVjdAouaWRlYS8KKi50bXByb2oK
          Makefile: CmhlbG0tZHJ5OgoJaGVsbSBpbnN0YWxsIC0tbmFtZSBjbGlja2hvdXNlLXRlc3QgLS1uYW1lc3BhY2U9cGxheWdyb3VuZCAtLWRlYnVnIC0tZHJ5LXJ1biAuCgpoZWxtLWxpbnQ6CgloZWxtIGxpbnQgLgoKaGVsbS1pbnN0YWxsLXRlc3Q6CgloZWxtIGluc3RhbGwgLS1uYW1lIGNsaWNraG91c2UtdGVzdCAtLW5hbWVzcGFjZT1wbGF5Z3JvdW5kIC4KCmhlbG0taW5zdGFsbC1zdGc6CgloZWxtIGluc3RhbGwgLS1uYW1lIGNsaWNraG91c2Utc3RnIFwKCSAgICAtLW5hbWVzcGFjZT1jbGlja2hvdXNlIFwKCSAgICAtLXNldCByZXBsaWNhQ291bnQ9NSBcCgkgICAgLS1zZXQgZWJzLnNpemU9NTAwR2kgXAoJICAgIC0tc2V0IHNlY3VyaXR5LmVuYWJsZWQ9dHJ1ZSBcCgkgICAgLS1zZXQgcmVzb3VyY2VzLmxpbWl0cy5jcHU9MzgwMG0gXAoJICAgIC0tc2V0IHJlc291cmNlcy5saW1pdHMubWVtb3J5PTI4MDAwTWkgXAoJICAgIC0tc2V0IHJlc291cmNlcy5yZXF1ZXN0cy5jcHU9MzgwMG0gXAoJICAgIC0tc2V0IHJlc291cmNlcy5yZXF1ZXN0cy5tZW1vcnk9MjgwMDBNaSBcCgkgICAgLgoKaGVsbS1kZWw6CgloZWxtIGRlbCAtLXB1cmdlIGNsaWNraG91c2UtdGVzdAoKa3ViZS1nZXQ6CglrdWJlY3RsIC1uIHBsYXlncm91bmQgZ2V0IGRlcGxveW1lbnQscG9kLHN2YyxpbmdyZXNzCg==
          out.txt: W2RlYnVnXSBDcmVhdGVkIHR1bm5lbCB1c2luZyBsb2NhbCBwb3J0OiAnMzkwMjEnCgpbZGVidWddIFNFUlZFUjogIjEyNy4wLjAuMTozOTAyMSIKCltkZWJ1Z10gT3JpZ2luYWwgY2hhcnQgdmVyc2lvbjogIiIKW2RlYnVnXSBDSEFSVCBQQVRIOiAvaG9tZS9tYXR0L2Rldi9sZWFybi9jaC9jbGlja2hvdXNlLW9uLWt1YmVybmV0ZXMvaGVsbS9jbGlja2hvdXNlLW9uLWt1YmUKCg==
        Release:
          IsInstall: true
          IsUpgrade: false
          Name: pugnacious-armadillo
          Namespace: default
          Revision: 1
          Service: Tiller
          Time:
            nanos: 183928543
            seconds: 1541388067
        Template:
          BasePath: clickhouse-on-kube/templates
          Name: clickhouse-on-kube/templates/statefulset.yaml
        Values:
          affinity: {}
          ebs:
            enabled: false
            size: 8Gi
          elb:
            enabled: false
            internal_range: 10.59.0.0/16,10.10.0.0/16
          image:
            pullPolicy: Always
            repository: dmitryb/clickhouse-server
            tag: latest
          ingress:
            annotations: {}
            enabled: false
            hosts:
            - chart-example.local
            path: /
            tls: []
          nodeSelector:
            type: services
          rbac: true
          replicaCount: "3"
          resources:
            limits:
              cpu: 250m
              memory: 1024Mi
            requests:
              cpu: 250m
              memory: 1024Mi
          security:
            distributed:
              password: iudhc87wfy87hrevh
              profile: default
              quota: default
              user: sys_distrib_query
            enabled: false
            profiles:
            - load_balancing: random
              max_memory_usage: 10000000000
              name: default
              use_uncompressed_cache: 0
            quotas:
            - duration: 3600
              errors: 0
              execution_time: 0
              name: default
              queries: 0
              read_rows: 0
              result_rows: 0
            users:
            - name: user_1
              password: djfgyeugf3484rf4
              profile: default
              quota: default
            - name: svc
              password: sdkfh1kjdshfkjj3
              profile: default
              quota: default
          service:
            rest_port: 8123
            rpc_port: 9000
            type: ClusterIP
          shardCount: "5"
          tolerations: []
          zk:
            enabled: false
            port: 2181
            servers:
            - zk-zookeeper.zk
          



---
apiVersion: apps/v1beta1
kind: StatefulSet
metadata:
  name: pugnacious-armadillo-4
  labels:
    app: pugnacious-armadillo
    chart: clickhouse-on-kube-0.1.0
    release: pugnacious-armadillo
    heritage: Tiller
spec:
  podManagementPolicy: OrderedReady
  affinity:
    nodeAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
            - key: app
              operator: In
              values:
                - web-store
        topologyKey: "kubernetes.io/hostname"
  replicas: 3
  selector:
    matchLabels:
      app: pugnacious-armadillo
      release: pugnacious-armadillo
  serviceName: pugnacious-armadillo
  template:
    metadata:
      labels:
        app: pugnacious-armadillo
        release: pugnacious-armadillo
    spec:      
      initContainers:
      - name: labeler
        image: devth/k8s-labeler
        env:
        - name: KUBE_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: KUBE_LABEL_shard_name
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
      containers:
        - name: pugnacious-armadillo
          image: "dmitryb/clickhouse-server:latest"
          imagePullPolicy: Always          
          ports:
          - name: rpc
            containerPort: 9000
            protocol: TCP
          - name: rest
            containerPort: 8123
            protocol: TCP          
          - name: interserver
            containerPort: 9009
            protocol: TCP
          livenessProbe:
            httpGet:
              path: /
              port: rest
            initialDelaySeconds: 10
            periodSeconds: 10
            failureThreshold: 5
            timeoutSeconds: 1
          readinessProbe:
            httpGet:
              path: /
              port: rest
            initialDelaySeconds: 10
            periodSeconds: 10
            failureThreshold: 5
            timeoutSeconds: 1
          volumeMounts:
          - name: clickhouse-configd
            mountPath: /etc/clickhouse-server/config.d
          
          
          resources:
            limits:
              cpu: 250m
              memory: 1024Mi
            requests:
              cpu: 250m
              memory: 1024Mi
            
      volumes:
      - name: clickhouse-configd
        configMap:
          name: pugnacious-armadillo-configd
      
      
      nodeSelector:
        Capabilities:
          APIVersions:
            admissionregistration.k8s.io/v1beta1: {}
            apiextensions.k8s.io/v1beta1: {}
            apiregistration.k8s.io/v1: {}
            apiregistration.k8s.io/v1beta1: {}
            apps/v1: {}
            apps/v1beta1: {}
            apps/v1beta2: {}
            authentication.k8s.io/v1: {}
            authentication.k8s.io/v1beta1: {}
            authorization.k8s.io/v1: {}
            authorization.k8s.io/v1beta1: {}
            autoscaling/v1: {}
            autoscaling/v2beta1: {}
            batch/v1: {}
            batch/v1beta1: {}
            certificates.k8s.io/v1beta1: {}
            events.k8s.io/v1beta1: {}
            extensions/v1beta1: {}
            networking.k8s.io/v1: {}
            policy/v1beta1: {}
            rbac.authorization.k8s.io/v1: {}
            rbac.authorization.k8s.io/v1beta1: {}
            storage.k8s.io/v1: {}
            storage.k8s.io/v1beta1: {}
            v1: {}
          KubeVersion:
            buildDate: 2018-03-26T16:44:10Z
            compiler: gc
            gitCommit: fc32d2f3698e36b93322a3465f63a14e9f0eaead
            gitTreeState: clean
            gitVersion: v1.10.0
            goVersion: go1.9.3
            major: "1"
            minor: "10"
            platform: linux/amd64
          TillerVersion:
            git_commit: 2e55dbe1fdb5fdb96b75ff144a339489417b146b
            git_tree_state: clean
            sem_ver: v2.11.0
        Chart:
          apiVersion: v1
          appVersion: "1.0"
          description: A Helm chart for Kubernetes
          name: clickhouse-on-kube
          version: 0.1.0
        Files:
          .helmignore: IyBQYXR0ZXJucyB0byBpZ25vcmUgd2hlbiBidWlsZGluZyBwYWNrYWdlcy4KIyBUaGlzIHN1cHBvcnRzIHNoZWxsIGdsb2IgbWF0Y2hpbmcsIHJlbGF0aXZlIHBhdGggbWF0Y2hpbmcsIGFuZAojIG5lZ2F0aW9uIChwcmVmaXhlZCB3aXRoICEpLiBPbmx5IG9uZSBwYXR0ZXJuIHBlciBsaW5lLgouRFNfU3RvcmUKIyBDb21tb24gVkNTIGRpcnMKLmdpdC8KLmdpdGlnbm9yZQouYnpyLwouYnpyaWdub3JlCi5oZy8KLmhnaWdub3JlCi5zdm4vCiMgQ29tbW9uIGJhY2t1cCBmaWxlcwoqLnN3cAoqLmJhawoqLnRtcAoqfgojIFZhcmlvdXMgSURFcwoucHJvamVjdAouaWRlYS8KKi50bXByb2oK
          Makefile: CmhlbG0tZHJ5OgoJaGVsbSBpbnN0YWxsIC0tbmFtZSBjbGlja2hvdXNlLXRlc3QgLS1uYW1lc3BhY2U9cGxheWdyb3VuZCAtLWRlYnVnIC0tZHJ5LXJ1biAuCgpoZWxtLWxpbnQ6CgloZWxtIGxpbnQgLgoKaGVsbS1pbnN0YWxsLXRlc3Q6CgloZWxtIGluc3RhbGwgLS1uYW1lIGNsaWNraG91c2UtdGVzdCAtLW5hbWVzcGFjZT1wbGF5Z3JvdW5kIC4KCmhlbG0taW5zdGFsbC1zdGc6CgloZWxtIGluc3RhbGwgLS1uYW1lIGNsaWNraG91c2Utc3RnIFwKCSAgICAtLW5hbWVzcGFjZT1jbGlja2hvdXNlIFwKCSAgICAtLXNldCByZXBsaWNhQ291bnQ9NSBcCgkgICAgLS1zZXQgZWJzLnNpemU9NTAwR2kgXAoJICAgIC0tc2V0IHNlY3VyaXR5LmVuYWJsZWQ9dHJ1ZSBcCgkgICAgLS1zZXQgcmVzb3VyY2VzLmxpbWl0cy5jcHU9MzgwMG0gXAoJICAgIC0tc2V0IHJlc291cmNlcy5saW1pdHMubWVtb3J5PTI4MDAwTWkgXAoJICAgIC0tc2V0IHJlc291cmNlcy5yZXF1ZXN0cy5jcHU9MzgwMG0gXAoJICAgIC0tc2V0IHJlc291cmNlcy5yZXF1ZXN0cy5tZW1vcnk9MjgwMDBNaSBcCgkgICAgLgoKaGVsbS1kZWw6CgloZWxtIGRlbCAtLXB1cmdlIGNsaWNraG91c2UtdGVzdAoKa3ViZS1nZXQ6CglrdWJlY3RsIC1uIHBsYXlncm91bmQgZ2V0IGRlcGxveW1lbnQscG9kLHN2YyxpbmdyZXNzCg==
          out.txt: W2RlYnVnXSBDcmVhdGVkIHR1bm5lbCB1c2luZyBsb2NhbCBwb3J0OiAnMzkwMjEnCgpbZGVidWddIFNFUlZFUjogIjEyNy4wLjAuMTozOTAyMSIKCltkZWJ1Z10gT3JpZ2luYWwgY2hhcnQgdmVyc2lvbjogIiIKW2RlYnVnXSBDSEFSVCBQQVRIOiAvaG9tZS9tYXR0L2Rldi9sZWFybi9jaC9jbGlja2hvdXNlLW9uLWt1YmVybmV0ZXMvaGVsbS9jbGlja2hvdXNlLW9uLWt1YmUKCg==
        Release:
          IsInstall: true
          IsUpgrade: false
          Name: pugnacious-armadillo
          Namespace: default
          Revision: 1
          Service: Tiller
          Time:
            nanos: 183928543
            seconds: 1541388067
        Template:
          BasePath: clickhouse-on-kube/templates
          Name: clickhouse-on-kube/templates/statefulset.yaml
        Values:
          affinity: {}
          ebs:
            enabled: false
            size: 8Gi
          elb:
            enabled: false
            internal_range: 10.59.0.0/16,10.10.0.0/16
          image:
            pullPolicy: Always
            repository: dmitryb/clickhouse-server
            tag: latest
          ingress:
            annotations: {}
            enabled: false
            hosts:
            - chart-example.local
            path: /
            tls: []
          nodeSelector:
            type: services
          rbac: true
          replicaCount: "3"
          resources:
            limits:
              cpu: 250m
              memory: 1024Mi
            requests:
              cpu: 250m
              memory: 1024Mi
          security:
            distributed:
              password: iudhc87wfy87hrevh
              profile: default
              quota: default
              user: sys_distrib_query
            enabled: false
            profiles:
            - load_balancing: random
              max_memory_usage: 10000000000
              name: default
              use_uncompressed_cache: 0
            quotas:
            - duration: 3600
              errors: 0
              execution_time: 0
              name: default
              queries: 0
              read_rows: 0
              result_rows: 0
            users:
            - name: user_1
              password: djfgyeugf3484rf4
              profile: default
              quota: default
            - name: svc
              password: sdkfh1kjdshfkjj3
              profile: default
              quota: default
          service:
            rest_port: 8123
            rpc_port: 9000
            type: ClusterIP
          shardCount: "5"
          tolerations: []
          zk:
            enabled: false
            port: 2181
            servers:
            - zk-zookeeper.zk
          



---
# Source: clickhouse-on-kube/templates/service.yaml

apiVersion: v1
kind: Service
metadata:
  name: pugnacious-armadillo-0
  labels:
    app: clickhouse-on-kube
    chart: clickhouse-on-kube-0.1.0
    release: pugnacious-armadillo
    heritage: Tiller
spec:
  type: ClusterIP
  ports:
  - name: rpc
    port: 9000
    targetPort: 9000
    protocol: TCP      
  - name: rest
    port: 8123
    targetPort: 8123
    protocol: TCP      
  - name: interserver
    port: 9009
    targetPort: 9009
    protocol: TCP
  selector:
    app: pugnacious-armadillo
    shard_name: pugnacious-armadillo-0
    release: pugnacious-armadillo
---

apiVersion: v1
kind: Service
metadata:
  name: pugnacious-armadillo-1
  labels:
    app: clickhouse-on-kube
    chart: clickhouse-on-kube-0.1.0
    release: pugnacious-armadillo
    heritage: Tiller
spec:
  type: ClusterIP
  ports:
  - name: rpc
    port: 9000
    targetPort: 9000
    protocol: TCP      
  - name: rest
    port: 8123
    targetPort: 8123
    protocol: TCP      
  - name: interserver
    port: 9009
    targetPort: 9009
    protocol: TCP
  selector:
    app: pugnacious-armadillo
    shard_name: pugnacious-armadillo-1
    release: pugnacious-armadillo
---

apiVersion: v1
kind: Service
metadata:
  name: pugnacious-armadillo-2
  labels:
    app: clickhouse-on-kube
    chart: clickhouse-on-kube-0.1.0
    release: pugnacious-armadillo
    heritage: Tiller
spec:
  type: ClusterIP
  ports:
  - name: rpc
    port: 9000
    targetPort: 9000
    protocol: TCP      
  - name: rest
    port: 8123
    targetPort: 8123
    protocol: TCP      
  - name: interserver
    port: 9009
    targetPort: 9009
    protocol: TCP
  selector:
    app: pugnacious-armadillo
    shard_name: pugnacious-armadillo-2
    release: pugnacious-armadillo
---

# --- elb ---

